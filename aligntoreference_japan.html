<script type="application/json" id="jp-covid19-confirmed-data">
{"JP-01":{"iso_numeric":1,"iso_alpha2":"JP-01","name_en":"Hokkaidō","name_ja":"北海道","region":"hokkaido","population":5286000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,4,4,7,17,25,29,34,37,52,64,68,71,75,77,81,84,91,97,103,110,119,128,130,140,144,148,150,150,153,156,156,159,160,161,163,164]},"JP-02":{"iso_numeric":2,"iso_alpha2":"JP-02","name_en":"Aomori","name_ja":"青森","region":"tohoku","population":1263000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,6]},"JP-03":{"iso_numeric":3,"iso_alpha2":"JP-03","name_en":"Iwate","name_ja":"岩手","region":"tohoku","population":1241000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},"JP-04":{"iso_numeric":4,"iso_alpha2":"JP-04","name_en":"Miyagi","name_ja":"宮城","region":"tohoku","population":2316000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]},"JP-05":{"iso_numeric":5,"iso_alpha2":"JP-05","name_en":"Akita","name_ja":"秋田","region":"tohoku","population":981000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2]},"JP-06":{"iso_numeric":6,"iso_alpha2":"JP-06","name_en":"Yamagata","name_ja":"山形","region":"tohoku","population":1090000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},"JP-07":{"iso_numeric":7,"iso_alpha2":"JP-07","name_en":"Fukushima","name_ja":"福島","region":"tohoku","population":1864000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2]},"JP-08":{"iso_numeric":8,"iso_alpha2":"JP-08","name_en":"Ibaraki","name_ja":"茨城","region":"kanto","population":2877000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,3,3,3,4,5,10,10]},"JP-09":{"iso_numeric":9,"iso_alpha2":"JP-09","name_en":"Tochigi","name_ja":"栃木","region":"kanto","population":1946000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,4,4,4,4,5,9]},"JP-10":{"iso_numeric":10,"iso_alpha2":"JP-10","name_en":"Gunma","name_ja":"群馬","region":"kanto","population":1952000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,3,3,5,5,6,10,10,10,11,11,11,11,14,14]},"JP-11":{"iso_numeric":11,"iso_alpha2":"JP-11","name_en":"Saitama","name_ja":"埼玉","region":"kanto","population":7330000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,2,2,2,2,3,4,4,4,4,4,4,4,4,4,4,4,4,4,6,9,9,10,10,15,17,23,30,32,32,32,37,38,42,45,53,55,56,63,63]},"JP-12":{"iso_numeric":12,"iso_alpha2":"JP-12","name_en":"Chiba","name_ja":"千葉","region":"kanto","population":6255000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,3,6,7,7,7,9,10,11,11,11,12,12,13,13,14,18,19,20,20,23,25,27,29,29,29,29,31,33,36,37,37,39,39,40,44]},"JP-13":{"iso_numeric":13,"iso_alpha2":"JP-13","name_en":"Tōkyō","name_ja":"東京","region":"kanto","population":13822000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,11,15,15,18,21,22,25,27,27,32,32,35,35,36,38,40,40,41,45,53,59,64,64,64,67,73,75,77,86,90,90,102,109,117,128,137,140,157,173,213]},"JP-14":{"iso_numeric":14,"iso_alpha2":"JP-14","name_en":"Kanagawa","name_ja":"神奈川","region":"kanto","population":9177000.0,"num_cases":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,3,4,4,4,5,7,8,10,13,17,17,18,18,20,24,25,25,27,31,32,32,36,41,42,42,42,45,50,51,52,54,58,61,63,67,72,75,79,79,79,86,89]},"JP-15":{"iso_numeric":15,"iso_alpha2":"JP-15","name_en":"Niigata","name_ja":"新潟","region":"chubu","population":2246000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,5,5,5,5,7,10,10,13,13,15,15,18,20,21,23,24,26,26,26,27,28]},"JP-16":{"iso_numeric":16,"iso_alpha2":"JP-16","name_en":"Toyama","name_ja":"富山","region":"chubu","population":1050000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},"JP-17":{"iso_numeric":17,"iso_alpha2":"JP-17","name_en":"Ishikawa","name_ja":"石川","region":"chubu","population":1143000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,2,4,4,4,4,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7]},"JP-18":{"iso_numeric":18,"iso_alpha2":"JP-18","name_en":"Fukui","name_ja":"福井","region":"chubu","population":774000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,3]},"JP-19":{"iso_numeric":19,"iso_alpha2":"JP-19","name_en":"Yamanashi","name_ja":"山梨","region":"chubu","population":817000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,4,4]},"JP-20":{"iso_numeric":20,"iso_alpha2":"JP-20","name_en":"Nagano","name_ja":"長野","region":"chubu","population":2063000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,5,5]},"JP-21":{"iso_numeric":21,"iso_alpha2":"JP-21","name_en":"Gifu","name_ja":"岐阜","region":"chubu","population":1997000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,4,7,10,11]},"JP-22":{"iso_numeric":22,"iso_alpha2":"JP-22","name_en":"Shizuoka","name_ja":"静岡","region":"chubu","population":3659000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,3,3,3]},"JP-23":{"iso_numeric":23,"iso_alpha2":"JP-23","name_en":"Aichi","name_ja":"愛知","region":"chubu","population":7537000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,9,13,15,15,18,23,25,26,27,30,30,39,47,55,60,67,78,84,97,102,109,112,119,119,121,123,128,132,138,140,143,145,148,153]},"JP-24":{"iso_numeric":24,"iso_alpha2":"JP-24","name_en":"Mie","name_ja":"三重","region":"kinki","population":1791000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,3,8,8,8,9,9,9,9,10,10,10,10,10,10,10,10]},"JP-25":{"iso_numeric":25,"iso_alpha2":"JP-25","name_en":"Shiga","name_ja":"滋賀","region":"kinki","population":1412000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,3,4,5,5,5,5,5,5,6,6,6]},"JP-26":{"iso_numeric":26,"iso_alpha2":"JP-26","name_en":"Kyōto","name_ja":"京都","region":"kinki","population":2591000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,5,5,6,7,7,11,12,14,16,16,16,16,16,18,20,20,21,22,23,24,26,30]},"JP-27":{"iso_numeric":27,"iso_alpha2":"JP-27","name_en":"Ōsaka","name_ja":"大阪","region":"kinki","population":8813000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,3,5,7,7,7,9,11,20,22,35,45,59,59,76,83,91,95,105,109,111,115,120,122,127,129,135,138,146,152]},"JP-28":{"iso_numeric":28,"iso_alpha2":"JP-28","name_en":"Hyōgo","name_ja":"兵庫","region":"kinki","population":5484000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,3,3,4,8,10,12,16,25,38,46,56,67,79,84,85,90,94,100,106,112,114,117,118]},"JP-29":{"iso_numeric":29,"iso_alpha2":"JP-29","name_en":"Nara","name_ja":"奈良","region":"kinki","population":1339000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,4,4,6,7,8,8,8,8,8,8,8,8,8,8,8,9,9,9,9]},"JP-30":{"iso_numeric":30,"iso_alpha2":"JP-30","name_en":"Wakayama","name_ja":"和歌山","region":"kinki","population":935000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,5,5,9,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,15,15,15,16,17,18,18,18,18,18,18]},"JP-31":{"iso_numeric":31,"iso_alpha2":"JP-31","name_en":"Tottori","name_ja":"鳥取","region":"chugoku","population":560000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},"JP-32":{"iso_numeric":32,"iso_alpha2":"JP-32","name_en":"Shimane","name_ja":"島根","region":"chugoku","population":680000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},"JP-33":{"iso_numeric":33,"iso_alpha2":"JP-33","name_en":"Okayama","name_ja":"岡山","region":"chugoku","population":1898000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2]},"JP-34":{"iso_numeric":34,"iso_alpha2":"JP-34","name_en":"Hiroshima","name_ja":"広島","region":"chugoku","population":2817000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,2,3,3,3,3,3]},"JP-35":{"iso_numeric":35,"iso_alpha2":"JP-35","name_en":"Yamaguchi","name_ja":"山口","region":"chugoku","population":1370000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,5]},"JP-36":{"iso_numeric":36,"iso_alpha2":"JP-36","name_en":"Tokushima","name_ja":"徳島","region":"shikoku","population":736000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]},"JP-37":{"iso_numeric":37,"iso_alpha2":"JP-37","name_en":"Kagawa","name_ja":"香川","region":"shikoku","population":962000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1]},"JP-38":{"iso_numeric":38,"iso_alpha2":"JP-38","name_en":"Ehime","name_ja":"愛媛","region":"shikoku","population":1352000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3]},"JP-39":{"iso_numeric":39,"iso_alpha2":"JP-39","name_en":"Kōchi","name_ja":"高知","region":"shikoku","population":706000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,2,3,3,7,7,8,9,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11]},"JP-40":{"iso_numeric":40,"iso_alpha2":"JP-40","name_en":"Fukuoka","name_ja":"福岡","region":"kyushu","population":5107000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,6,6,6,7,10,10]},"JP-41":{"iso_numeric":41,"iso_alpha2":"JP-41","name_en":"Saga","name_ja":"佐賀","region":"kyushu","population":819000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1]},"JP-42":{"iso_numeric":42,"iso_alpha2":"JP-42","name_en":"Nagasaki","name_ja":"長崎","region":"kyushu","population":1341000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,2]},"JP-43":{"iso_numeric":43,"iso_alpha2":"JP-43","name_en":"Kumamoto","name_ja":"熊本","region":"kyushu","population":1757000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,3,3,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,8]},"JP-44":{"iso_numeric":44,"iso_alpha2":"JP-44","name_en":"Ōita","name_ja":"大分","region":"kyushu","population":1144000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,8,13,21,22,23,25]},"JP-45":{"iso_numeric":45,"iso_alpha2":"JP-45","name_en":"Miyasaki","name_ja":"宮崎","region":"kyushu","population":1081000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,3,3,3,3,3,3,3,3,3]},"JP-46":{"iso_numeric":46,"iso_alpha2":"JP-46","name_en":"Kagoshima","name_ja":"鹿児島","region":"kyushu","population":1614000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},"JP-47":{"iso_numeric":47,"iso_alpha2":"JP-47","name_en":"Okinawa","name_ja":"沖縄","region":"kyushu","population":1448000.0,"num_cases":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,5,5,5]}}
</script>
<script src='https://www.gstatic.com/charts/loader.js'></script>
<p>J.A.G JAPAN社新型コロナウイルス感染者数マップデータより<br />
2020年3月26日午前11時頃（日本時間）収集</p>
<div style="display:table">
<div style="display:table-cell;vertical-align:middle;">データの種類&ensp;</div>
<div style="display:table-cell;border:solid 1pt;border-color:#888;padding:2pt;">
確定例
<input type="radio" name="data-type" id="data-type-confirmed-counts" value="confirmed-counts">人数</input>
<input type="radio" name="data-type" id="data-type-confirmed-ratios" value="confirmed-ratios" checked="true">人口比</input>
</div>
</div>
<div style="width:100%;height:500px;">
<div id="state-notice" style="position:absolute;width:100%;height:400px;top:240px;font-size:32pt;text-align:center;"></div>
<div id="chart-covid" style="width:100%;height:500px;">...</div>
</div>
<div id="parameters" style="margin-left: 10%;">
<div id="parameter-display-period">
<input type="range" id="display-period-slider" min="10" max="100" step="1" style="width:150px";></input>
表示日数
<input type="number" id="display-period" min="10" max="100" style="text-align:right;" size="4"></input>
日
</div>
<div id="parameter-continents">
<div style="display:table-cell;text-align:right;vertical-align:middle;width:150px;">地域区分&ensp;</div>
<div style="display:table-cell;">
<input type="checkbox" id="continent-hokkaido" checked="true">北海道</input>
<input type="checkbox" id="continent-tohoku" checked="true">東北</input>
<input type="checkbox" id="continent-kanto" checked="true">関東</input>
<input type="checkbox" id="continent-chubu" checked="true">中部</input>
<input type="checkbox" id="continent-kinki" checked="true">近畿</input>
<input type="checkbox" id="continent-chugoku" checked="true">中国</input>
<input type="checkbox" id="continent-shikoku" checked="true">四国</input>
<input type="checkbox" id="continent-kyushu" checked="true">九州・沖縄</input>
</div>
</div>
<div id="parameter-alignment-reference">
<input type="range" id="alignment-reference-slider" min="1" max="100" step="1" style="width:150px";></input>
基準値
<input type="number" id="alignment-reference" min="1" max="100" style="text-align:right;" size="4"></input>
<span id="alignment-reference-unit"></span>
</div>
</div>
<p id="data-sources">データソース ジャッグジャパン株式会社, <a href="https://gis.jag-japan.com/covid19jp/">https://gis.jag-japan.com/covid19jp/</a> (CC BY-NC 4.0);<br />
人口に関して e-Stat, 独立行政法人統計センター, <a href="https://www.e-stat.go.jp/dbview?sid=0003312315">https://www.e-stat.go.jp/dbview?sid=0003312315</a>.</p>
<p>1 日に 1 度程度、手動で更新しています。（データライセンス <a href="https://creativecommons.org/licenses/by-nc/4.0/deed.ja">CC BY-NC 4.0</a>）<br />
プログラムコード <a href="https://github.com/muimuiz/covid19atr">https://github.com/muimuiz/covid19atr</a></p>
<!-- ================================================================ -->
<script type="text/javascript">

google.charts.load('current', {packages: ['corechart']});

// data

const startYear  = 2020;
const startMonth =    1;
const startDay   =   15;

const confirmedData = JSON.parse(document.getElementById('jp-covid19-confirmed-data').textContent);

let RatiosData = class {
    constructor(data_) {
        for (let prefectureId in data_) {
            const population = data_[prefectureId].population;
            const counts     = data_[prefectureId].num_cases;
            let ratios = [];
            for (let index = 0; index < counts.length; index ++) {
                const ratio = parseFloat((1e6 * counts[index] / population).toFixed(3))
                ratios.push(ratio); // num per million
            }
            this[prefectureId] = ratios;
        }
    }
}
const confirmedRatiosData = new RatiosData(confirmedData);

// data types

let DataType = class {
    prefectures() { return null ; }
    numericIdOf(prefectureId_) { return null ; }
    nameJaOf(prefectureId_)    { return null ; }
    nameEnOf(prefectureId_)    { return null ; }
    regionOf(prefectureId_)    { return null ; }
    popultionOf(prefectureId_) { return null ; }
    dataArrayOf(prefectureId_) { return null ; }
    referenceParameter_defaultValue() { return null ; }
    referenceParameter_unitFactor()   { return null ; }
    referenceParameter_unitString()   { return null ; }
    hAxisTitle() { return null ; }
    vAxisTitle() { return null ; }
}

let DataType_Confirmed = class extends DataType {
    numericIdOf(prefectureId_)  { return confirmedData[prefectureId_].iso_numeric ; }
    nameJaOf(prefectureId_)     { return confirmedData[prefectureId_].name_ja ; }
    nameEnOf(prefectureId_)     { return confirmedData[prefectureId_].name_en ; }
    regionOf(prefectureId_)     { return confirmedData[prefectureId_].region ; }
    populationOf(prefectureId_) { return confirmedData[prefectureId_].population ; }
}
let DataType_ConfirmedCounts = class extends DataType_Confirmed {
    prefectures() { return Object.keys(confirmedData).sort() ; }
    dataArrayOf(prefectureId_) { return confirmedData[prefectureId_].num_cases ; }
    referenceParameter_defaultValue() { return 10 ; }
    referenceParameter_unitFactor()   { return  1 ; }
    referenceParameter_unitString()   { return ' 人' ; }
    hAxisTitle() { return '基準値に達してからの経過日数' ; }
    vAxisTitle() { return '確定例の累計 (対数目盛り)' ; }
}
let DataType_ConfirmedRatios = class extends DataType_Confirmed {
    prefectures() { return Object.keys(confirmedRatiosData).sort() ; }
    dataArrayOf(prefectureId_) { return confirmedRatiosData[prefectureId_] ; }
    referenceParameter_defaultValue() { return 20   ; }
    referenceParameter_unitFactor()   { return  0.1 ; }
    referenceParameter_unitString()   { return ' ×人／1000 万人' ; }
    hAxisTitle() { return '基準値に達してからの経過日数' ; }
    vAxisTitle() { return "確定例の人口比\n(累積, 100 万人あたりの人数, 対数目盛り)" ; }
}

let dataType = null;

function dataType_discern() {
    if        (document.getElementById('data-type-confirmed-counts').checked) {
        dataType = new DataType_ConfirmedCounts();
    } else if (document.getElementById('data-type-confirmed-ratios').checked) {
        dataType = new DataType_ConfirmedRatios();
    }
}

// parameters

let Parameter = class {
    inputElement  = null;
    sliderElement = null;
    constructor(inputElement_, sliderElement_, initialValue_) {
        this.inputElement  = inputElement_;
        this.sliderElement = sliderElement_;
        document.getElementById(this.inputElement).value  = initialValue_;
        document.getElementById(this.sliderElement).value = initialValue_;
    }
    syncInput() {
        const value = document.getElementById(this.sliderElement).value;
        document.getElementById(this.inputElement).value = value;
    }
    syncSlider() {
        const value = document.getElementById(this.inputElement).value;
        document.getElementById(this.sliderElement).value = value;
    }
    value() {
        return document.getElementById(this.inputElement).value ;
    }
    setValue(value_) {
        document.getElementById(this.inputElement).value = value_;
        syncSlider();
    }
}

let Parameter_DisplayPeriod = class extends Parameter {
    constructor() {
        super('display-period', 'display-period-slider', 40);
    }
}
let Parameter_AlignmentReference = class extends Parameter {
    constructor(dataType_) {
        const defaultValue = dataType_.referenceParameter_defaultValue();
        const unitFactor   = dataType_.referenceParameter_unitFactor();
        super('alignment-reference', 'alignment-reference-slider', defaultValue);
        this.unitFactor = unitFactor;
    }
    value() {
        return document.getElementById(this.inputElement).value * this.unitFactor ;
    }
    setValue(value_) {
        document.getElementById(this.inputElement).value = Math.round(value_ / this.unitFactor);
        syncSlider();
    }
}

let parameter_displayPeriod      = null;
let parameter_alignmentReference = null;

// continents

function continentSelected(continent_) {
    let elementId = null;
    switch (continent_) {
    case 'hokkaido' : elementId = 'continent-hokkaido'; break;
    case 'tohoku'   : elementId = 'continent-tohoku';   break;
    case 'kanto'    : elementId = 'continent-kanto';    break;
    case 'chubu'    : elementId = 'continent-chubu';    break;
    case 'kinki'    : elementId = 'continent-kinki';    break;
    case 'chugoku'  : elementId = 'continent-chugoku';  break;
    case 'shikoku'  : elementId = 'continent-shikoku';  break;
    case 'kyushu'   : elementId = 'continent-kyushu';   break;
    }
    if (elementId === null) return false ;
    return document.getElementById(elementId).checked ;
}

// alignment to reference

function interpolate(value_, valueAt0_, valueAt1_, logarithmic_ = false) {
    if (! logarithmic_) {
        return (value_ - valueAt0_) / (valueAt1_ - valueAt0_) ;
    } else {
        return Math.log(value_ / valueAt0_) / Math.log(valueAt1_ / valueAt0_) ;
    }
}

function scanReferenceIndex(dataArray_, referenceValue_) {
    let valuePrevious = null;
    let valueCurrent  = null;
    let referenceIndex = null;
    for (let index = 0; index < dataArray_.length; index ++) {
        valueCurrent = dataArray_[index];
        if (valueCurrent >= referenceValue_) {
            if (valuePrevious !== null) {
                referenceIndex = index - interpolate(referenceValue_, valueCurrent, valuePrevious, true);
            }
            break;
        }
        valuePrevious = valueCurrent;
    }
    return referenceIndex ; // nullable
 }
 
// colors

function levelOff(value_) {
    return (value_ < 0.0)? 0.0 : (value_ <= 1.0)? value_ : 1.0 ;
}
function fraction(value_) {
    return value_ - Math.floor(value_) ;
}
function hexString2(value_) {
    return ('0' + value_.toString(16)).substr(-2) ;
}

const PREFECTURE_ID_OFFSET = 13

function prefectureColor(prefectureId_) {
    const numberId   = dataType.numericIdOf(prefectureId_) - PREFECTURE_ID_OFFSET;
    const population = dataType.populationOf(prefectureId_);
    // hsv
    const hue = 360.0 * fraction(Math.sqrt(2.0) * numberId / 5.0);
    const sat = 0.25 + 0.75 * levelOff((Math.log10(population) - 6.0) / 2.0);
    const val = 1.00 - 0.50 * fraction(Math.sqrt(2.0) * numberId / 7.0);
    // hsv to rgb
    const hex = hue / 60.0;
    const hexI = Math.floor(hex);
    const hexF = fraction(hex);
    const vc1 = val * (1.0 - sat * hexF);
    const vc2 = val * (1.0 - sat);
    const vc3 = val * (1.0 - sat * (1.0 - hexF));
    let r = 0.0, g = 0.0, b = 0.0;
    switch (hexI) {
    case 0 : r = val; g = vc3; b = vc2; break;
    case 1 : r = vc1; g = val; b = vc2; break;
    case 2 : r = vc2; g = val; b = vc3; break;
    case 3 : r = vc2; g = vc1; b = val; break;
    case 4 : r = vc3; g = vc2; b = val; break;
    case 5 : r = val; g = vc2; b = vc1; break;
    }
    const rr = hexString2(Math.round(255 * levelOff(r)));
    const gg = hexString2(Math.round(255 * levelOff(g)));
    const bb = hexString2(Math.round(255 * levelOff(b)));
    return '#' + rr + gg + bb ;
}

// notification

let StateNotice = class {
    constructor(elementId_) {
        this.elementId = elementId_
        document.getElementById(this.elementId).style.visibility = 'hidden';
    }
    notify(message_) {
        const element = document.getElementById(this.elementId);
        element.innerHTML = message_;
        element.style.visibility = 'visible';
    }
    clear() {
        document.getElementById(this.elementId).style.visibility = 'hidden';
    }
}
stateNotice = null;

// chart

const OPTIONS_STATIC = {
    titlePosition: 'none',
    chartArea: { left: '10%', width: '85%', top: '15%', height: '70%', bottom: '15%' },
    backgroundColor: 'transparent',
    legend: {
        position: 'top',
        textStyle: { fontSize: 12 },
        maxLines: 3,
    },
    interpolateNulls: true,
    hAxis: {
        titleTextStyle: { fontSize: 12, italic: false },
        viewWindowMode: 'explicit',
        viewWindow: { min: 0.0 },
    },
    vAxis: {
        scaleType: 'log',
        titleTextStyle: { fontSize: 12, italic: false },
        viewWindowMode: 'explicit',
        viewWindow: {},
    },
};

function tooltip(nameJa_, dateOffset_, value_) {
    const date = new Date(startYear, startMonth - 1, startDay + dateOffset_);
    const yearString  = String(date.getFullYear());
    const monthString = ('0' + String(date.getMonth() + 1)).substr(-2);
    const dayString   = ('0' + String(date.getDate())).substr(-2);
    const dateString  = yearString + '-' + monthString + '-' + dayString;
    return nameJa_ + "\n" + dateString + "\n" + String(value_) ;
}

function drawChart() {
    const prefectures = dataType.prefectures();
    const referenceValue      = parameter_alignmentReference.value();
    let dataJoined  = null;
    let dataColumns = [];
    let dataColors  = [];
    for (let prefecture_index = 0; prefecture_index < prefectures.length; prefecture_index ++) {
        const prefectureId = prefectures[prefecture_index];
        const region = dataType.regionOf(prefectureId);
        if (continentSelected(region)) {
            const population = dataType.populationOf(prefectureId);
            const dataArray = dataType.dataArrayOf(prefectureId);
            const referenceIndex = scanReferenceIndex(dataArray, referenceValue);
            if ((referenceIndex !== null)&&(referenceIndex > 0.0)) {
                let dataTable = new google.visualization.DataTable();
                const nameJa = dataType.nameJaOf(prefectureId);
                dataTable.addColumn('number', 'days');
                dataTable.addColumn('number', nameJa);
                dataTable.addColumn({ type: 'string', role: 'tooltip' });
                let rows = [];
                for (let index = 0; index < dataArray.length; index ++) {
                    rows.push([index - referenceIndex, dataArray[index], tooltip(nameJa, index, dataArray[index])]);
                }
                dataTable.addRows(rows);
                if (dataJoined === null) {
                    dataJoined = dataTable;
                } else {
                    dataJoined = google.visualization.data.join(dataJoined, dataTable, 'full', [[0,0]], dataColumns, [1, 2]);
                }
                dataColumns.push(dataColumns.length + 1);
                dataColumns.push(dataColumns.length + 1);
                dataColors.push(prefectureColor(prefectureId));
            }
        }
    }
    if (dataColumns.length > 0) {
        let options = OPTIONS_STATIC;
        options.hAxis.title = dataType.hAxisTitle();
        options.vAxis.title = dataType.vAxisTitle();
        options.hAxis.viewWindow.max = parameter_displayPeriod.value();
        options.vAxis.viewWindow.min = referenceValue;
        options.colors = dataColors;
        let chart = new google.visualization.LineChart(document.getElementById('chart-covid'));
        let dataView = new google.visualization.DataView(dataJoined);
        chart.draw(dataJoined, options);
        stateNotice.clear();
    } else {
        dataJoined  = null;
        dataColumns = [];
        dataColors  = [];
        stateNotice.notify('データがありません');
    }
}

// callbacks

function setReferenceParameterUnit(dataType_) {
    const unitString = dataType_.referenceParameter_unitString();
    document.getElementById('alignment-reference-unit').innerHTML = unitString;
}

google.charts.setOnLoadCallback(function() {
    stateNotice = new StateNotice('state-notice');
    stateNotice.notify('処理中...');
    dataType_discern();
    parameter_displayPeriod       = new Parameter_DisplayPeriod();
    parameter_alignmentReference  = new Parameter_AlignmentReference(dataType);
    setReferenceParameterUnit(dataType);
    drawChart();
});

const REDRAW_PENDING_INTERVAL = 500; // ms

let redrawPendingTimer = null;

function redrawPending() {
    stateNotice.notify('処理中...');
    if (redrawPendingTimer !== null) clearTimeout(redrawPendingTimer) ;
    redrawPendingTimer = setTimeout(drawChart, REDRAW_PENDING_INTERVAL);
}

window.addEventListener('resize', redrawPending);

function changeDataType() {
    dataType_discern();
    parameter_alignmentReference = new Parameter_AlignmentReference(dataType);
    setReferenceParameterUnit(dataType);
    redrawPending();
}

document.getElementById('data-type-confirmed-counts').addEventListener('change', changeDataType);
document.getElementById('data-type-confirmed-ratios').addEventListener('change', changeDataType);

document.getElementById('display-period').addEventListener('change', function(){
    parameter_displayPeriod.syncSlider();
    redrawPending();
});
document.getElementById('display-period-slider').addEventListener('input', function(){
    parameter_displayPeriod.syncInput();
    redrawPending();
});
document.getElementById('continent-hokkaido').addEventListener('change', redrawPending);
document.getElementById('continent-tohoku').addEventListener('change', redrawPending);
document.getElementById('continent-kanto').addEventListener('change', redrawPending);
document.getElementById('continent-chubu').addEventListener('change', redrawPending);
document.getElementById('continent-kinki').addEventListener('change', redrawPending);
document.getElementById('continent-chugoku').addEventListener('change', redrawPending);
document.getElementById('continent-shikoku').addEventListener('change', redrawPending);
document.getElementById('continent-kyushu').addEventListener('change', redrawPending);
document.getElementById('alignment-reference').addEventListener('change', function(){
    parameter_alignmentReference.syncSlider();
    redrawPending();
});
document.getElementById('alignment-reference-slider').addEventListener('input', function(){
    parameter_alignmentReference.syncInput();
    redrawPending();
});

</script>
